<%@taglib prefix="s" uri="/struts-tags" %>
<script>
function selectAll(){
	var listp=document.getElementsByName('presente');
	for (var i=0;i<listp.length;i++){
		var e = listp[i];
		e.setAttribute("checked","checked");
				
	}
	var listm=document.getElementsByName('mensa');
	for (var i=0;i<listm.length;i++){
		var e = listm[i];
		e.setAttribute("checked","checked");
				
	}
	
	var listc=document.getElementsByName('completo');
	for (var i=0;i<listc.length;i++){
		var e = listc[i];
		e.setAttribute("checked","checked");
				
	}
}
</script>


<div id="blockcnt" >
<table>
<tr><td>Seleziona tutti (presenze/mensa/completo)</td>
<td><input type="checkbox" name="all" onclick="javascript:selectAll()" /></td>
</tr>
<s:form name="presenze" action="savePresenze" method="POST" >

<tr><td colspan="12" align="center"><b>Lista Presenze giornaliere <s:property value="periodo" /> giorno: <s:property value="sgiorno"/></b></td></tr>
<tr><td>Cognome</td><td>Nome</td><td colspan="2">Presenza</td><td colspan="2">Mensa</td><td colspan="2">Completo</td><td colspan="2">Mattina</td><td colspan="2">Pomeriggio</td></tr>
<s:hidden name="sgiorno" value="%{sgiorno}"/>
<s:iterator var="p" value="registro" status="stat">

<tr>
<s:hidden name="ragazzoOid" value="%{ragazzi.oid}"/>
<td><s:property value="ragazzi.cognome" /></td>
<td><s:property value="ragazzi.nome" /></td>

<td>Presente </td><td>

<s:if test="%{presente}">
<input type="checkbox" name="presente" value="<s:property value="ragazzi.oid"/>" checked />
</s:if>
<s:else>
<input type="checkbox" name="presente" value="<s:property value="ragazzi.oid"/>" />
</s:else>
</td>
<td>Mensa </td><td>
<s:if test="%{mensa}">
<input type="checkbox" name="mensa" value="<s:property value="ragazzi.oid"/>"  checked/>
</s:if>
<s:else>
<input type="checkbox" name="mensa" value="<s:property value="ragazzi.oid"/>"  />
</s:else>
</td>
<td>Completo </td><td>
<s:if test="%{completo}">
<input type="checkbox" name="completo" value="<s:property value="ragazzi.oid"/>" checked />
</s:if>
<s:else>
<input type="checkbox" name="completo" value="<s:property value="ragazzi.oid"/>" />
</s:else>
</td>
<td>Mattina </td><td>
<s:if test="%{mattina}" >
<input type="checkbox" name="mattina" value="<s:property value="ragazzi.oid"/>" checked/>
</s:if>
<s:else>
<input type="checkbox" name="mattina" value="<s:property value="ragazzi.oid"/>" />
</s:else>
</td>
<td>Pomeriggio </td><td>
<s:if test="%{pomeriggio}">
<input type="checkbox" name="pomeriggio" value="<s:property value="ragazzi.oid"/>" checked/>
</s:if>
<s:else>
<input type="checkbox" name="pomeriggio" value="<s:property value="ragazzi.oid"/>"/>
</s:else>
</td>
</tr>
</s:iterator>
<s:submit label="Salva" value="Salva"  />
</s:form>
</table>
<ul>
<li>Numero presenti a mensa:<s:property value="numeroMensa" /></li>
<li>Numero presenti mattina:<s:property value="presentiMattina" /></li>
<li>Numero presenti pomeriggio:<s:property value="presentiPomeriggio" /></li>
</ul>
</div>